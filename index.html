<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minang Chicken Login</title>
  <style>
    /* Reset & base */
    * {
      box-sizing: border-box;
    }
    @import url('https://fonts.googleapis.com/css2?      family=Inter:wght@400;600;700;800&family=Montserrat:wght@400;600;700;800&display=s  wap');
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana,'Montserrat', sans-serif;
      transition: background-color 0.5s ease, color 0.5s ease;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 2rem;
      background-color: #fff;
      background-image:
      linear-gradient(to right, #ddd 1px, transparent 1px),
      linear-gradient(to bottom, #ddd 1px, transparent 1px);
      background-size: 30px 30px;
      color: #000;
      user-select: none;
    }
    body.dark {
      background-color: #121212;
      background-image:
      linear-gradient(to right, #222 1px, transparent 1px),
      linear-gradient(to bottom, #222 1px, transparent 1px);
      color: #eee;
    }

    /* Container */
    .login-container {
      background: #fff;
      padding: 2.5rem 3rem;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
      width: 360px;
      text-align: center;
      transition: background-color 0.5s ease, box-shadow 0.5s ease;
      user-select: none;
    }
    body.dark .login-container {
      background: #1E1E1E;
      box-shadow: 0 4px 20px rgba(0,0,0,0.6);
    }

    /* Header Image */
    .login-header img {
      width: 340px;
      max-width: 125%;
      margin-bottom: 0.75rem;
      display: block;
      margin-left: -13%;
      margin-right: auto;
      border-radius: 25px;
      transition: filter 0.5s ease;
      user-select: none;
    }
body.dark .login-header img:hover {
  filter: drop-shadow(0 0 10px #ffa500);
  cursor: pointer; /* opsional, biar mouse berubah jadi pointer */
}
    /* Subtitle */
    .subtitle {
      font-size: 14px;
      color: #666;
      margin-bottom: 2rem;
      transition: color 0.5s ease;
      user-select: none;
      font-family: 'Montserrat';
    }
    body.dark .subtitle {
      color: #bbb;
    }

    /* Form */
    form {
      margin-top: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.75rem;
    }

    input[type="text"],
    input[type="password"] {
      background: #fff;
      font-family: 'Montserrat';
      border: 2px solid #000;
      border-radius: 20px;
      padding: 0.75rem 1rem;
      font-size: 14px;
      color: #000;
      transition: border-color 0.3s ease, background-color 0.5s ease, color 0.5s ease;
      user-select: text;
      text-align : center;
    }
    body.dark input[type="text"],
    body.dark input[type="password"] {
      background: #222;
      border-color: #eee;
      color: #eee;
    }
    input::placeholder {
      color: #666;
      user-select: none;
    }
    body.dark input::placeholder {
      color: #aaa;
    }

input[type="text"]:focus,
input[type="password"]:focus {
  outline: none;
  border-color: #000;
  box-shadow: 0 0 6px #00000066;
}

body.dark input[type="text"]:focus,
body.dark input[type="password"]:focus {
  border-color: #ffa500; /* ganti jadi orange */
  box-shadow: 0 0 8px #ffa500aa; /* glow orange */
}


    /* Button */
      .animated-button {
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 12px 28px;
      border: 4px solid transparent;
      font-family: 'Montserrat';
      font-size: 16px;
      background-color: #fff;
      border-radius: 100px;
      font-weight: 800;
      color: #000;
      box-shadow: 0 0 0 2px #000;
      cursor: pointer;
      overflow: hidden;
      transition:
      background-color 0.5s ease,
      color 0.5s ease,
      box-shadow 0.5s ease;
      user-select: none;
      min-width: 140px;
      margin: 0 auto;
    }
    body.dark .animated-button {
      background-color: #121212;
      color: #eee;
      box-shadow: 0 0 0 2px #eee;
    }

    .animated-button .circle {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 20px;
      height: 20px;
      background-color: #000;
      border-radius: 50%;
      opacity: 0;
      transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
      pointer-events: none;
    }

    body.dark .animated-button .circle {
      background-color: #eee;
    }
    .animated-button .text {
      position: relative;
      z-index: 1;
      transition: all 0.8s cubic-bezier(0.23, 1, 0.32, 1);
      user-select: none;
    }

    .animated-button:hover {
      box-shadow: 0 0 0 12px transparent;
      color: #fff;
      background-color: #000;
      border-radius: 12px;
    }
    body.dark .animated-button:hover {
      background-color: #eee;
      color: #121212;
      box-shadow: 0 0 0 12px transparent;
      border-radius: 12px;
    }

    .animated-button:active {
      scale: 0.95;
      box-shadow: 0 0 0 4px #000;
    }
    body.dark .animated-button:active {
      box-shadow: 0 0 0 4px #eee;
    }

    .animated-button:hover .circle {
      width: 220px;
      height: 220px;
      opacity: 1;
    }

    /* Copyright */
    .copyright {
      margin-top: 2rem;
      font-size: 0.9rem;
      color: #888;
      user-select: none;
      transition: color 0.5s ease;
    }
    body.dark .copyright {
      color: #666;
    }
/* From Uiverse.io by chicogale */ 
.cyber-toggle-wrapper {
  display: inline-flex;
  flex-direction: row; /* supaya label sejajar kanan kiri */
  justify-content: center; /* tengah secara horizontal */
  align-items: center;
  position: fixed;
  bottom: 10px; /* jarak dari bawah layar */
  left: 50%;
  transform: translateX(-50%);
  padding: 0;
  gap: 12px; /* jarak horizontal antara toggle dan tulisan */
  background: transparent;
  z-index: 1000;
}
.cyber-toggle-checkbox {
  position: absolute;
  opacity: 0;
  width: 0;
  height: 0;
}

.cyber-toggle {
  position: relative;
  display: inline-block;
  width: 40px;  /* dari 64px ke 40px */
  height: 20px; /* dari 32px ke 20px */
  cursor: pointer;
}

.cyber-toggle-track {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #111;
  border-radius: 16px;
  overflow: hidden;
  box-shadow:
    0 4px 8px rgba(0, 0, 0, 0.5),
    inset 0 0 4px rgba(0, 0, 0, 0.8);
  transition: all 0.4s cubic-bezier(0.3, 1.5, 0.7, 1);
}

.cyber-toggle-track::before {
  content: "";
  position: absolute;
  inset: 2px;
  border-radius: 14px;
  background: #222;
  box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.5);
  z-index: 0;
  transition: all 0.4s ease;
}

.cyber-toggle-track-glow {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(90deg, #ff0000, #ffa500);
  opacity: 0;
  border-radius: 16px;
  z-index: 1;
  transition: all 0.4s ease;
}

.cyber-toggle-thumb {
  position: absolute;
  width: 14px;  /* dari 24px ke 14px */
  height: 14px; /* dari 24px ke 14px */
  top: 3px;     /* sesuaikan posisi vertikal */
  left: 3px;    /* posisi awal thumb */
  background: #151515;
  border-radius: 50%;
  z-index: 2;
  transition: all 0.4s cubic-bezier(0.3, 1.5, 0.7, 1);
  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
}

.cyber-toggle-thumb-shadow {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(
    circle at 30% 30%,
    rgba(255, 255, 255, 0.1),
    transparent 70%
  );
  z-index: 1;
}

.cyber-toggle-thumb-highlight {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: radial-gradient(
    circle at 70% 70%,
    rgba(0, 0, 0, 0.2),
    transparent 70%
  );
  z-index: 1;
}

.cyber-toggle-thumb-icon {
  position: absolute;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 2;
  opacity: 0.7;
  transition:
    opacity 0.4s ease,
    transform 0.4s ease;
}

.cyber-toggle-thumb-icon svg {
  width: 14px;
  height: 14px;
  fill: #555;
  transition:
    fill 0.4s ease,
    transform 0.4s ease;
}

.cyber-toggle-track-dots {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: flex-end;
  align-items: center;
  padding-right: 10px;
  z-index: 1;
}

.cyber-toggle-track-dot {
  width: 3px;
  height: 3px;
  border-radius: 50%;
  background: #444;
  margin-left: 3px;
  opacity: 0.5;
  transition: all 0.4s ease;
}

.cyber-toggle-particles {
  position: absolute;
  inset: 0;
  z-index: 0;
  overflow: hidden;
  pointer-events: none;
}

.cyber-toggle-particle {
  position: absolute;
  width: 3px;
  height: 3px;
  background: #ffa500; /* ganti dari biru ke orange */
  border-radius: 50%;
  opacity: 0;
  filter: blur(1px);
  transition: all 0.3s ease;
  box-shadow: 0 0 4px rgba(255, 165, 0, 0.8); /* orange shadow */
}

.cyber-toggle-particle:nth-child(1) {
  top: 15%;
  right: 20%;
}

.cyber-toggle-particle:nth-child(2) {
  top: 45%;
  right: 30%;
}

.cyber-toggle-particle:nth-child(3) {
  top: 25%;
  right: 40%;
}

.cyber-toggle-particle:nth-child(4) {
  top: 60%;
  right: 15%;
}

.cyber-toggle-labels {
  display: flex;
  flex-direction: row; /* horizontal */
  gap: 10px; /* jarak spasi antar label */
  width: auto;
  margin-top: 0;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 1px;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

.cyber-toggle-label-off {
  color: #555;
  transition: all 0.4s ease;
}

.cyber-toggle-label-on {
  color: #555;
  transition: all 0.4s ease;
}

/* Stati attivi */
.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-track-glow {
  opacity: 0.5;
}

.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-thumb {
  left: calc(100% - 17px); /* sesuaikan dengan ukuran kecil */
  background: #222;
}

.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-thumb-icon {
  transform: rotate(360deg);
}

.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-thumb-icon svg {
  fill: #ffa500;
}

.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-track-dot {
  background: #ffa500; /* ganti dari biru ke orange */
  box-shadow: 0 0 4px #ffa500; /* ganti dari biru ke orange */
  opacity: 1;
}

.cyber-toggle-checkbox:checked ~ .cyber-toggle-labels .cyber-toggle-label-on {
color: #ffa500; /* ganti dari biru ke orange */
  text-shadow: 0 0 5px rgba(255, 165, 0, 0.5); /* ganti dari biru ke orange */
}

.cyber-toggle-checkbox:not(:checked)
  ~ .cyber-toggle-labels
  .cyber-toggle-label-off {
  color: #aaa;
}

/* Animazione particelle quando attivo */
.cyber-toggle-checkbox:checked + .cyber-toggle .cyber-toggle-particle {
  opacity: 1;
  animation: cyber-toggle-float 3s infinite alternate;
}

.cyber-toggle-checkbox:checked
  + .cyber-toggle
  .cyber-toggle-particle:nth-child(1) {
  animation-delay: 0s;
}

.cyber-toggle-checkbox:checked
  + .cyber-toggle
  .cyber-toggle-particle:nth-child(2) {
  animation-delay: 0.5s;
}

.cyber-toggle-checkbox:checked
  + .cyber-toggle
  .cyber-toggle-particle:nth-child(3) {
  animation-delay: 1s;
}

.cyber-toggle-checkbox:checked
  + .cyber-toggle
  .cyber-toggle-particle:nth-child(4) {
  animation-delay: 1.5s;
}

/* Effetto hover */
.cyber-toggle:hover .cyber-toggle-track::before {
  background: #272727;
}

.cyber-toggle:hover .cyber-toggle-thumb {
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
}

.cyber-toggle-checkbox:checked + .cyber-toggle:hover .cyber-toggle-track-glow {
  opacity: 0.7;
}

/* Effetto focus per accessibilità */
.cyber-toggle-checkbox:focus + .cyber-toggle {
  outline: none;
}

.cyber-toggle-checkbox:focus + .cyber-toggle::after {
  content: "";
  position: absolute;
  inset: -4px;
  border-radius: 20px;
  border: 2px solid rgba(255, 165, 0, 0.5);
  opacity: 0.5;
}

/* === OFF STATE (putih dengan border hitam) === */
.cyber-toggle-checkbox:not(:checked) + .cyber-toggle .cyber-toggle-track {
  background: white;
  border: 2px solid black;
  box-shadow: none;
}

.cyber-toggle-checkbox:not(:checked) + .cyber-toggle .cyber-toggle-track::before {
  background: white;
  box-shadow: none;
}

.cyber-toggle-checkbox:not(:checked) + .cyber-toggle .cyber-toggle-thumb {
  background: white;
  border: 2px solid black;
  box-shadow: none;
}

.cyber-toggle-checkbox:not(:checked) + .cyber-toggle .cyber-toggle-thumb-icon svg {
  fill: #000; /* Ikon hitam */
}

.cyber-toggle-checkbox:not(:checked) + .cyber-toggle .cyber-toggle-track-dot {
  background: #000; /* Titik hitam */
  box-shadow: none;
}

@keyframes cyber-toggle-float {
  0% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
  100% {
    transform: translateY(0);
  }
}
.spinner {
  border: 3px solid #f3f3f3; /* light gray */
  border-top: 3px solid #3498db; /* blue */
  border-radius: 50%;
  width: 16px;
  height: 16px;
  animation: spin 1s linear infinite;
  display: inline-block;
  vertical-align: middle;
  margin-left: 8px;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

#popup {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background-color: #4caf50;
  color: white;
  padding: 20px 40px;
  border-radius: 30px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  opacity: 0;
  transition: opacity 0.3s ease;
  z-index: 1000;
  pointer-events: none; /* supaya gak bisa diklik kalau gak muncul */
  font-family: 'Montserrat';
}

#popup.show {
  opacity: 0.85; /* 75% transparan */
  pointer-events: auto;
}

#loginBtn {
transition: opacity 0.3s ease;
}

  </style>
</head>
<body>

<div class="login-container">

  <div class="login-header">
    <img id="header-img" src="https://i.imgur.com/ICtnWt9.png" alt="Login Header" draggable="false" />
    <div class="subtitle">Silahkan login terlebih dahulu</div>
  </div>

  <form>
<input type="text" id="username" name="username" placeholder="Enter your username" autocomplete="username" required />
<input type="password" id="password" name="password" placeholder="Enter your password" autocomplete="current-password" required />
    
    <button id="loginBtn" type="button" class="animated-button" aria-label="Login"> 
      <span class="btn-text">Login</span>
      <span class="spinner" style="display:none;"></span>
    </button>
  </form>
 <div class="copyright">© Minang Chicken 2025</div>
<div id="popup" class="popup"></div>
</div>
<!-- From Uiverse.io by chicogale --> 
<div class="cyber-toggle-wrapper">
  <input class="cyber-toggle-checkbox" id="mode-toggle" type="checkbox" />
  <label class="cyber-toggle" for="mode-toggle">
    <div class="cyber-toggle-track">
      <div class="cyber-toggle-track-glow"></div>
      <div class="cyber-toggle-track-dots">
        <span class="cyber-toggle-track-dot"></span>
        <span class="cyber-toggle-track-dot"></span>
        <span class="cyber-toggle-track-dot"></span>
      </div>
    </div>
    <div class="cyber-toggle-thumb">
      <div class="cyber-toggle-thumb-shadow"></div>
      <div class="cyber-toggle-thumb-highlight"></div>
      <div class="cyber-toggle-thumb-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path
            d="M16.5 12c0-2.48-2.02-4.5-4.5-4.5s-4.5 2.02-4.5 4.5 2.02 4.5 4.5 4.5 4.5-2.02 4.5-4.5zm-4.5 7.5c-4.14 0-7.5-3.36-7.5-7.5s3.36-7.5 7.5-7.5 7.5 3.36 7.5 7.5-3.36 7.5-7.5 7.5zm0-16.5c-4.97 0-9 4.03-9 9h-3l3.89 3.89.07.14 4.04-4.03h-3c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42c1.63 1.63 3.87 2.64 6.36 2.64 4.97 0 9-4.03 9-9s-4.03-9-9-9z"
          ></path>
        </svg>
      </div>
    </div>
    <div class="cyber-toggle-particles">
      <span class="cyber-toggle-particle"></span>
      <span class="cyber-toggle-particle"></span>
      <span class="cyber-toggle-particle"></span>
      <span class="cyber-toggle-particle"></span>
    </div>
  </label>
  <div class="cyber-toggle-labels">
    <span class="cyber-toggle-label-off">LIGHT </span>
    <span class="cyber-toggle-label-on">  DARK</span>  
</div>

<script>>
document.addEventListener('DOMContentLoaded', function () {
  const toggle = document.getElementById('mode-toggle');
  const body = document.body;
  const headerImg = document.getElementById('header-img');
  const subtitle = document.querySelector('.subtitle');
  const loginBtn = document.getElementById('loginBtn');
  const btnText = loginBtn?.querySelector('.btn-text');
  const spinner = loginBtn?.querySelector('.spinner');
  const popup = document.getElementById('popup');

  if (!toggle || !headerImg || !subtitle || !loginBtn || !btnText || !spinner || !popup) {
    console.warn("Element penting tidak ditemukan. Periksa ID/class HTML.");
    return;
  }

  const lightImg = "https://i.imgur.com/ICtnWt9.png";
  const darkImg = "https://fontmeme.com/permalink/250529/c5fbc9fd5fe46637522e00b6e65508da.png";

  // Inisialisasi tema berdasarkan preferensi
  function initMode() {
    const savedTheme = localStorage.getItem('theme');
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

    if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
      body.classList.add('dark');
      toggle.checked = true;
      headerImg.src = darkImg;
      subtitle.style.color = "#bbb";
    } else {
      body.classList.remove('dark');
      toggle.checked = false;
      headerImg.src = lightImg;
      subtitle.style.color = "#666";
    }
  }

  toggle.addEventListener('change', () => {
    if (toggle.checked) {
      body.classList.add('dark');
      localStorage.setItem('theme', 'dark');
      headerImg.src = darkImg;
      subtitle.style.color = "#bbb";
    } else {
      body.classList.remove('dark');
      localStorage.setItem('theme', 'light');
      headerImg.src = lightImg;
      subtitle.style.color = "#666";
    }
  });

  initMode();

  // Fungsi tampilkan popup notifikasi
  function showPopup(message, success = true) {
    const icon = success
      ? `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12" /></svg>`
      : `<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18" /><line x1="6" y1="6" x2="18" y2="18" /></svg>`;

    popup.innerHTML = `${icon}<span style="margin-left: 8px;">${message}</span>`;
    popup.style.backgroundColor = success ? '#4caf50' : '#f44336';
    popup.style.color = '#fff';
    popup.classList.add('show');

    setTimeout(() => popup.classList.remove('show'), 3000);
  }

  // Fungsi login pakai JSONP
  async function login() {
    const username = document.getElementById("username")?.value.trim();
    const password = document.getElementById("password")?.value.trim();

    if (!username || !password) {
      showPopup("Username dan password harus diisi", false);
      return;
    }

    btnText.style.display = 'none';
    spinner.style.display = 'inline-block';
    loginBtn.disabled = true;

    // Hapus script JSONP lama jika ada
    const oldScript = document.getElementById('jsonp-login-script');
    if (oldScript) oldScript.remove();

    const callbackName = 'handleLogin_' + Date.now();

    // Timeout 10 detik jika server tidak merespon
    let timeoutId = setTimeout(() => {
      showPopup("Timeout: Server tidak merespon", false);
      btnText.style.display = 'inline';
      spinner.style.display = 'none';
      loginBtn.disabled = false;
      delete window[callbackName];
      document.getElementById('jsonp-login-script')?.remove();
    }, 10000);

    window[callbackName] = function(result) {
      clearTimeout(timeoutId);
      btnText.style.display = 'inline';
      spinner.style.display = 'none';
      loginBtn.disabled = false;

      if (result.success) {
        const user = {
          username: result.username,
          nama: result.nama,
          level: result.level
        };
        localStorage.setItem("user", JSON.stringify(user));
        localStorage.setItem("username", result.username);  // tambah ini
        localStorage.setItem("nama", result.nama);          // dan ini
        localStorage.setItem("lastActivity", Date.now());

        showPopup(`Selamat Datang ${result.nama}`, true);

        setTimeout(() => {
          window.location.href = "menu.html";
        }, 1000);
      }
      else {
        showPopup(result.message || "Username atau Password Salah !!!", false);
      }

      delete window[callbackName];
      document.getElementById('jsonp-login-script')?.remove();
    };

    // Buat dan tambahkan script JSONP
    const script = document.createElement('script');
    script.id = 'jsonp-login-script';
    script.src = `https://script.google.com/macros/s/AKfycbzq6o_ZETi5HfSMaVFgRBxM2eTfqRDu3DIGnUm-pRhCfaUuqaZXmVxFtfKI93CdG0e_/exec?action=index&username=${encodeURIComponent(username)}&password=${encodeURIComponent(password)}&callback=${callbackName}`;
    document.body.appendChild(script);
  }

  loginBtn.addEventListener('click', login);

  // Login dengan Enter
  document.getElementById('username')?.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); login(); } });
  document.getElementById('password')?.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); login(); } });

  // Cek session user sudah login atau belum (hanya di halaman selain login.html)
  const path = window.location.pathname;
  const isLoginPage = path.includes('index.html');
  if (!isLoginPage) {
    const user = JSON.parse(localStorage.getItem("user"));
    if (!user) {
      // Kalau belum login, redirect ke login.html
      window.location.href = "/index.html";
    }
  }

});
</script>
</body>
</html>
